{% comment %}theme-check-disable ImgLazyLoading{% endcomment %}
{{ 'component-featured-product.css' | asset_url | stylesheet_tag }}

<div
  class="collection-hero__inner page-width featured-product ">
  <div
    class="featured-product-hero"
    {%- if section.settings.show_collection_image and section.settings.collection.image -%}
      style="background-image:url('{{ section.settings.collection.image | img_url: 'master' }}'); background-size: {{ section.settings.background-size }};">
  {% endif %}

    {% if section.settings.custom_collection_title != '' %}
      <h1
        class="collection-hero__title"
        style="color: {{ section.settings.text_color }};">
        {{- section.settings.custom_collection_title | escape -}}
      </h1>
    {% else %}
      <h1
        class="collection-hero__title"
        style="color: {{ section.settings.text_color }};">
        {{ section.settings.collection.title | escape }}
      </h1>
    {% endif %}

    {%- if section.settings.show_collection_description -%}
      <div
        class="collection-hero__description rte"
        style="color: {{ section.settings.text_color }};">
        {{ section.settings.collection.description }}
      </div>
    {%- endif -%}
  </div>

  <div>
    <ul
      class="featured-product__products">
      {% for product in section.settings.collection.products limit: section.settings.products_to_show %}
        <li>
          <div
            class="featured-product__card">
            <a href="{{ product.url }}">
              <img
                class="featured-product__product-image"
                src="{{ product.featured_image | img_url: '200x' }}"
                alt="{{ product.featured_image.alt }}">
              <div
                class="featured-product__product-info">
                <div>{{- product.title -}}</div>
                <div>{{ product.price | money }}</div>
              </div>
            </a>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>
  
  {% if section.settings.collection %}
    <a
      href="{{ section.settings.collection.url }}"
      class="featured-product__collection-url">
      View all
    </a>
  {% endif %}
</div>

{% schema %}
  {
    "name": "Featured collection",
    "class": "section",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      },
      {
        "type": "range",
        "id": "products_to_show",
        "min": 3,
        "max": 5,
        "step": 1,
        "label": "How many featured products do you want to show?",
        "default": 4
      },
      {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000"
      },
      {
        "type": "text",
        "id": "custom_collection_title",
        "label": "Enter a custom collection title to overwrite the default one."
      },
      {
        "type": "checkbox",
        "id": "show_collection_description",
        "default": true,
        "label": "Show collection description?"
      }, 
      {
        "type": "header",
        "content": "Background Image"
      },
      {
        "type": "checkbox",
        "id": "show_collection_image",
        "default": false,
        "label": "Show collection image?"
      },
      {
        "type": "radio",
        "id": "background-size",
        "label": "Background style",
        "options": [
          {
            "value": "cover",
            "label": "Cover"
          },
          {
            "value": "contain",
            "label": "Contain"
          }
        ],
        "default": "cover"
      }
    ]
  }
{% endschema %}
